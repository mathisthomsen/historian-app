'use strict';const fs=require("fs"),path=require("path");console.log("\ud83d\udd27 Final import path cleanup - targeting remaining 80 errors...");
const findFiles=(a,b=[".ts",".tsx",".js",".jsx"])=>{let d=[];fs.readdirSync(a).forEach(c=>{const e=path.join(a,c),f=fs.statSync(e);f&&f.isDirectory()&&!c.startsWith(".")&&"node_modules"!==c?d=d.concat(findFiles(e,b)):b.some(g=>c.endsWith(g))&&d.push(e)});return d},finalMappings=[{from:"../lib/api",to:"../../lib/api"},{from:"../../lib/api",to:"../lib/api"},{from:"../../../lib/api",to:"../../lib/api"},{from:"../contexts/ProjectContext",to:"../../contexts/ProjectContext"},{from:"../hooks/useProjectApi",
to:"../../hooks/useProjectApi"},{from:"../types/project",to:"../../types/project"},{from:"../lib/services/geocoding",to:"../../lib/services/geocoding"},{from:"../lib/utils/fuzzyData",to:"../../lib/utils/fuzzyData"},{from:"../../app/lib/validation",to:"../../app/lib/utils/validation"},{from:"../../app/lib/fuzzyData",to:"../../app/lib/utils/fuzzyData"},{from:"../../app/components/BulkEditModal",to:"../../app/components/ui/BulkEditModal"},{from:"../../app/components/ImportHistory",to:"../../app/components/data/ImportHistory"},
{from:"../../app/components/PersonForm",to:"../../app/components/forms/PersonForm"},{from:"../../app/components/ImportPersons",to:"../../app/components/data/ImportPersons"},{from:"../../app/components/ImportEvents",to:"../../app/components/data/ImportEvents"},{from:"../../app/components/LifeEventForm",to:"../../app/components/forms/LifeEventForm"}],fixImportsInFile=a=>{try{let b=fs.readFileSync(a,"utf8"),d=!1;finalMappings.forEach(c=>{const e=new RegExp(`from\\s+['"]${c.from.replace(/[.*+?^${}()|[\]\\]/g,
"\\$&")}['"]`,"g");e.test(b)&&(b=b.replace(e,`from '${c.to}'`),d=!0,console.log(`\u2705 Fixed: ${a} - ${c.from} -> ${c.to}`))});d&&fs.writeFileSync(a,b,"utf8")}catch(b){console.error(`\u274c Error processing ${a}:`,b.message)}},fixComponentProps=()=>{try{let a=fs.readFileSync("app/locations/manage/page.tsx","utf8");a=a.replace(/<Grid item xs={12} sm={6} md={4} key={location\.id}>/g,'<Grid component="div" item xs={12} sm={6} md={4} key={location.id}>');fs.writeFileSync("app/locations/manage/page.tsx",
a,"utf8");console.log("\u2705 Fixed: Added component prop to Grid in locations/manage/page.tsx")}catch(a){console.error("\u274c Error fixing Grid props:",a.message)}try{let a=fs.readFileSync("app/persons/[id]/page.tsx","utf8");a=a.replace(/onSubmit={handleRelationshipSubmit}/g,"");fs.writeFileSync("app/persons/[id]/page.tsx",a,"utf8");console.log("\u2705 Fixed: Removed onSubmit prop from RelationshipForm")}catch(a){console.error("\u274c Error fixing RelationshipForm props:",a.message)}try{let a=fs.readFileSync("app/components/maps/LocationMap.tsx",
"utf8");a=a.replace(/onError:\s*\(\)\s*=>\s*\{[^}]*\},/g,"");fs.writeFileSync("app/components/maps/LocationMap.tsx",a,"utf8");console.log("\u2705 Fixed: Removed onError props from LocationMap")}catch(a){console.error("\u274c Error fixing LocationMap props:",a.message)}try{let a=fs.readFileSync("app/components/ui/customToolbar.tsx","utf8");a=a.replace(/const StyledToolbarButton = styled\(ToolbarButton\)<\{ ownerState: OwnerState \}>\([\s\S]*?\);/g,"const StyledToolbarButton = ToolbarButton;");fs.writeFileSync("app/components/ui/customToolbar.tsx",
a,"utf8");console.log("\u2705 Fixed: Simplified customToolbar styled component")}catch(a){console.error("\u274c Error fixing customToolbar:",a.message)}},fixBibliographySync=()=>{try{let a=fs.readFileSync("app/api/auth/mendeley/callback/route.ts","utf8");a=a.replace(/create:\s*\{[\s\S]*?userId:\s*any;[\s\S]*?isActive:\s*true;[\s\S]*?\}/g,"create: {\n        userId: user.id,\n        service: 'mendeley',\n        name: 'Mendeley',\n        accessToken: tokens.access_token,\n        refreshToken: tokens.refresh_token,\n        tokenExpiresAt: tokens.expires_at ? new Date(tokens.expires_at * 1000) : null,\n        isActive: true,\n        updatedAt: new Date(),\n        users: {\n          connect: { id: user.id }\n        }\n      }");
fs.writeFileSync("app/api/auth/mendeley/callback/route.ts",a,"utf8");console.log("\u2705 Fixed: bibliography sync schema in mendeley callback")}catch(a){console.error("\u274c Error fixing bibliography sync:",a.message)}},fixImplicitAnyErrors=()=>{try{let a=fs.readFileSync("app/account/projekte/page.tsx","utf8");a=a.replace(/const member = project\.members\.find\(m => m\.user\.id === project\.owner\.id\);/g,"const member = project.members.find((m: any) => m.user.id === project.owner.id);");a=a.replace(/\{projects\.map\(\(project\) => \(/g,
"{projects.map((project: any) => (");fs.writeFileSync("app/account/projekte/page.tsx",a,"utf8");console.log("\u2705 Fixed: Added type annotations in account/projekte/page.tsx")}catch(a){console.error("\u274c Error fixing implicit any:",a.message)}try{let a=fs.readFileSync("app/components/data/ProjectMembers.tsx","utf8");a=a.replace(/\{project\.members\.map\(\(member\) => \(/g,"{project.members.map((member: any) => (");a=a.replace(/onChange=\{\(e\) => setInviteData\(prev => \(\{ \.\.\.prev, email: e\.target\.value \}\)\)/g,
"onChange={(e) => setInviteData((prev: any) => ({ ...prev, email: e.target.value }))");a=a.replace(/onChange=\{\(e\) => setInviteData\(prev => \(\{ \.\.\.prev, role: e\.target\.value as any \}\)\)/g,"onChange={(e) => setInviteData((prev: any) => ({ ...prev, role: e.target.value as any }))");fs.writeFileSync("app/components/data/ProjectMembers.tsx",a,"utf8");console.log("\u2705 Fixed: Added type annotations in ProjectMembers.tsx")}catch(a){console.error("\u274c Error fixing ProjectMembers implicit any:",
a.message)}try{let a=fs.readFileSync("app/components/forms/ProjectForm.tsx","utf8");a=a.replace(/setFormData\(prev => \(/g,"setFormData((prev: any) => (");fs.writeFileSync("app/components/forms/ProjectForm.tsx",a,"utf8");console.log("\u2705 Fixed: Added type annotations in ProjectForm.tsx")}catch(a){console.error("\u274c Error fixing ProjectForm implicit any:",a.message)}try{let a=fs.readFileSync("app/contexts/ProjectContext.tsx","utf8");a=a.replace(/const member = project\.members\.find\(m => m\.user_id === userId\);/g,
"const member = project.members.find((m: any) => m.user_id === userId);");fs.writeFileSync("app/contexts/ProjectContext.tsx",a,"utf8");console.log("\u2705 Fixed: Added type annotations in ProjectContext.tsx")}catch(a){console.error("\u274c Error fixing ProjectContext implicit any:",a.message)}};
try{const a=findFiles("./app");console.log(`\ud83d\udcc1 Found ${a.length} files to process...`);a.forEach(fixImportsInFile);fixComponentProps();fixBibliographySync();fixImplicitAnyErrors();console.log("\ud83c\udf89 Final cleanup complete!");console.log("\ud83d\udccb Next steps:");console.log("   1. Run: npm run type-check");console.log("   2. Test the application at http://localhost:3002");console.log("   3. Verify all functionality works")}catch(a){console.error("\u274c Error during final cleanup:",
a),process.exit(1)};