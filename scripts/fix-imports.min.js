'use strict';const fs=require("fs"),path=require("path"),{execSync}=require("child_process");console.log("\ud83d\udd27 Fixing import paths after reorganization...");
const findFiles=(a,b=[".ts",".tsx",".js",".jsx"])=>{let d=[];fs.readdirSync(a).forEach(c=>{const e=path.join(a,c),f=fs.statSync(e);f&&f.isDirectory()&&!c.startsWith(".")&&"node_modules"!==c?d=d.concat(findFiles(e,b)):b.some(g=>c.endsWith(g))&&d.push(e)});return d},importMappings=[{from:"@/app/lib/prisma",to:"@/app/lib/database/prisma"},{from:"../../lib/prisma",to:"../../lib/database/prisma"},{from:"../lib/prisma",to:"../lib/database/prisma"},{from:"./lib/prisma",to:"./lib/database/prisma"},{from:"@/app/lib/api",
to:"@/app/lib/api/api"},{from:"../../lib/api",to:"../../lib/api/api"},{from:"../lib/api",to:"../lib/api/api"},{from:"./lib/api",to:"./lib/api/api"},{from:"@/app/lib/auth",to:"@/app/lib/auth/auth"},{from:"../../lib/auth",to:"../../lib/auth/auth"},{from:"../lib/auth",to:"../lib/auth/auth"},{from:"./lib/auth",to:"./lib/auth/auth"},{from:"@/app/lib/validation",to:"@/app/lib/utils/validation"},{from:"../../lib/validation",to:"../../lib/utils/validation"},{from:"../lib/validation",to:"../lib/utils/validation"},
{from:"./lib/validation",to:"./lib/utils/validation"},{from:"@/app/lib/fuzzyData",to:"@/app/lib/utils/fuzzyData"},{from:"../../lib/fuzzyData",to:"../../lib/utils/fuzzyData"},{from:"../lib/fuzzyData",to:"../lib/utils/fuzzyData"},{from:"./lib/fuzzyData",to:"./lib/utils/fuzzyData"},{from:"@/app/lib/geocoding",to:"@/app/lib/services/geocoding"},{from:"../../lib/geocoding",to:"../../lib/services/geocoding"},{from:"../lib/geocoding",to:"../lib/services/geocoding"},{from:"./lib/geocoding",to:"./lib/services/geocoding"},
{from:"@/app/lib/theme",to:"@/app/lib/config/theme"},{from:"../../lib/theme",to:"../../lib/config/theme"},{from:"../lib/theme",to:"../lib/config/theme"},{from:"./lib/theme",to:"./lib/config/theme"},{from:"@/app/lib/email",to:"@/app/lib/services/email"},{from:"../../lib/email",to:"../../lib/services/email"},{from:"../lib/email",to:"../lib/services/email"},{from:"./lib/email",to:"./lib/services/email"},{from:"@/app/lib/cache",to:"@/app/lib/utils/cache"},{from:"../../lib/cache",to:"../../lib/utils/cache"},
{from:"../lib/cache",to:"../lib/utils/cache"},{from:"./lib/cache",to:"./lib/utils/cache"},{from:"@/app/lib/bibliography-sync",to:"@/app/lib/services/bibliography-sync"},{from:"../../lib/bibliography-sync",to:"../../lib/utils/bibliography-sync"},{from:"../lib/bibliography-sync",to:"../lib/services/bibliography-sync"},{from:"./lib/bibliography-sync",to:"./lib/services/bibliography-sync"},{from:"@/app/lib/customPrismaAdapter",to:"@/app/lib/auth/customPrismaAdapter"},{from:"../../lib/customPrismaAdapter",
to:"../../lib/auth/customPrismaAdapter"},{from:"../lib/customPrismaAdapter",to:"../lib/auth/customPrismaAdapter"},{from:"./lib/customPrismaAdapter",to:"./lib/auth/customPrismaAdapter"},{from:"@/app/lib/requireUser",to:"@/app/lib/auth/requireUser"},{from:"../../lib/requireUser",to:"../../lib/auth/requireUser"},{from:"../lib/requireUser",to:"../lib/auth/requireUser"},{from:"./lib/requireUser",to:"./lib/auth/requireUser"},{from:"../components/",to:"../../components/"},{from:"./components/",to:"../components/"},
{from:"../contexts/",to:"../../contexts/"},{from:"./contexts/",to:"../contexts/"},{from:"../hooks/",to:"../../hooks/"},{from:"./hooks/",to:"../hooks/"},{from:"../types/",to:"../../types/"},{from:"./types/",to:"../types/"}],fixImportsInFile=a=>{try{let b=fs.readFileSync(a,"utf8"),d=!1;importMappings.forEach(c=>{const e=new RegExp(`from\\s+['"]${c.from.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}['"]`,"g");e.test(b)&&(b=b.replace(e,`from '${c.to}'`),d=!0,console.log(`\u2705 Fixed: ${a} - ${c.from} -> ${c.to}`))});
d&&fs.writeFileSync(a,b,"utf8")}catch(b){console.error(`\u274c Error processing ${a}:`,b.message)}};
try{const a=findFiles("./app");console.log(`\ud83d\udcc1 Found ${a.length} files to process...`);a.forEach(fixImportsInFile);console.log("\ud83c\udf89 Import path fixing complete!");console.log("\ud83d\udccb Next steps:");console.log("   1. Run: npm run type-check");console.log("   2. Run: npm run dev");console.log("   3. Test the application")}catch(a){console.error("\u274c Error during import fixing:",a),process.exit(1)};