'use strict';const fs=require("fs"),path=require("path");console.log("\ud83d\udd27 Fixing import paths with correct relative paths...");
const getCorrectRelativePath=(a,b)=>{a=path.dirname(a);b=path.resolve(b);b=path.relative(a,b);return b.startsWith(".")?b:`./${b}`},pathMappings=[{pattern:/app\/events\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/lib['"]/g,to:"from '../../lib'"},{from:/from\s+['"]\.\.\/contexts\/ProjectContext['"]/g,to:"from '../../contexts/ProjectContext'"},{from:/from\s+['"]\.\.\/hooks\/useProjectApi['"]/g,to:"from '../../hooks/useProjectApi'"},{from:/from\s+['"]\.\.\/types\/project['"]/g,to:"from '../../types/project'"}]},
{pattern:/app\/persons\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/lib['"]/g,to:"from '../../lib'"},{from:/from\s+['"]\.\.\/contexts\/ProjectContext['"]/g,to:"from '../../contexts/ProjectContext'"},{from:/from\s+['"]\.\.\/hooks\/useProjectApi['"]/g,to:"from '../../hooks/useProjectApi'"},{from:/from\s+['"]\.\.\/types\/project['"]/g,to:"from '../../types/project'"}]},{pattern:/app\/locations\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/lib['"]/g,to:"from '../../lib'"},{from:/from\s+['"]\.\.\/contexts\/ProjectContext['"]/g,
to:"from '../../contexts/ProjectContext'"},{from:/from\s+['"]\.\.\/hooks\/useProjectApi['"]/g,to:"from '../../hooks/useProjectApi'"},{from:/from\s+['"]\.\.\/types\/project['"]/g,to:"from '../../types/project'"}]},{pattern:/app\/literature\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/lib['"]/g,to:"from '../../lib'"},{from:/from\s+['"]\.\.\/contexts\/ProjectContext['"]/g,to:"from '../../contexts/ProjectContext'"},{from:/from\s+['"]\.\.\/hooks\/useProjectApi['"]/g,to:"from '../../hooks/useProjectApi'"},
{from:/from\s+['"]\.\.\/types\/project['"]/g,to:"from '../../types/project'"}]},{pattern:/app\/sources\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/lib['"]/g,to:"from '../../lib'"},{from:/from\s+['"]\.\.\/contexts\/ProjectContext['"]/g,to:"from '../../contexts/ProjectContext'"},{from:/from\s+['"]\.\.\/hooks\/useProjectApi['"]/g,to:"from '../../hooks/useProjectApi'"},{from:/from\s+['"]\.\.\/types\/project['"]/g,to:"from '../../types/project'"}]},{pattern:/app\/timeline\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/lib['"]/g,
to:"from '../../lib'"},{from:/from\s+['"]\.\.\/contexts\/ProjectContext['"]/g,to:"from '../../contexts/ProjectContext'"},{from:/from\s+['"]\.\.\/hooks\/useProjectApi['"]/g,to:"from '../../hooks/useProjectApi'"},{from:/from\s+['"]\.\.\/types\/project['"]/g,to:"from '../../types/project'"}]},{pattern:/app\/analytics\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/lib['"]/g,to:"from '../../lib'"},{from:/from\s+['"]\.\.\/contexts\/ProjectContext['"]/g,to:"from '../../contexts/ProjectContext'"},{from:/from\s+['"]\.\.\/hooks\/useProjectApi['"]/g,
to:"from '../../hooks/useProjectApi'"},{from:/from\s+['"]\.\.\/types\/project['"]/g,to:"from '../../types/project'"}]},{pattern:/app\/bibliography-sync\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/lib['"]/g,to:"from '../../lib'"},{from:/from\s+['"]\.\.\/contexts\/ProjectContext['"]/g,to:"from '../../contexts/ProjectContext'"},{from:/from\s+['"]\.\.\/hooks\/useProjectApi['"]/g,to:"from '../../hooks/useProjectApi'"},{from:/from\s+['"]\.\.\/types\/project['"]/g,to:"from '../../types/project'"}]},{pattern:/app\/account\/.*\.tsx?$/,
mappings:[{from:/from\s+['"]\.\.\/lib['"]/g,to:"from '../../lib'"},{from:/from\s+['"]\.\.\/contexts\/ProjectContext['"]/g,to:"from '../../contexts/ProjectContext'"},{from:/from\s+['"]\.\.\/hooks\/useProjectApi['"]/g,to:"from '../../hooks/useProjectApi'"},{from:/from\s+['"]\.\.\/types\/project['"]/g,to:"from '../../types/project'"}]},{pattern:/app\/dashboard\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/lib['"]/g,to:"from '../lib'"},{from:/from\s+['"]\.\.\/contexts\/ProjectContext['"]/g,to:"from '../contexts/ProjectContext'"},
{from:/from\s+['"]\.\.\/hooks\/useProjectApi['"]/g,to:"from '../hooks/useProjectApi'"},{from:/from\s+['"]\.\.\/types\/project['"]/g,to:"from '../types/project'"}]},{pattern:/app\/components\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/lib['"]/g,to:"from '../lib'"},{from:/from\s+['"]\.\.\/contexts\/ProjectContext['"]/g,to:"from '../contexts/ProjectContext'"},{from:/from\s+['"]\.\.\/hooks\/useProjectApi['"]/g,to:"from '../hooks/useProjectApi'"},{from:/from\s+['"]\.\.\/types\/project['"]/g,to:"from '../types/project'"}]},
{pattern:/app\/contexts\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/\.\.\/types\/project['"]/g,to:"from '../types/project'"}]},{pattern:/app\/hooks\/.*\.tsx?$/,mappings:[{from:/from\s+['"]\.\.\/\.\.\/contexts\/ProjectContext['"]/g,to:"from '../contexts/ProjectContext'"}]}],findFiles=(a,b=[".ts",".tsx",".js",".jsx"])=>{let d=[];fs.readdirSync(a).forEach(e=>{const c=path.join(a,e),f=fs.statSync(c);f&&f.isDirectory()&&!e.startsWith(".")&&"node_modules"!==e?d=d.concat(findFiles(c,b)):b.some(g=>e.endsWith(g))&&
d.push(c)});return d},fixImportsInFile=a=>{try{let b=fs.readFileSync(a,"utf8"),d=!1;for(const e of pathMappings)if(e.pattern.test(a)){for(const c of e.mappings)c.from.test(b)&&(b=b.replace(c.from,c.to),d=!0,console.log(`\u2705 Fixed: ${a} - ${c.from.source} -> ${c.to}`));break}d&&fs.writeFileSync(a,b,"utf8")}catch(b){console.error(`\u274c Error processing ${a}:`,b.message)}},fixComponentProps=()=>{try{let a=fs.readFileSync("app/components/maps/LocationMap.tsx","utf8");a=a.replace(/onError:\s*\(\)\s*=>\s*\{[^}]*\},/g,
"");fs.writeFileSync("app/components/maps/LocationMap.tsx",a,"utf8");console.log("\u2705 Fixed: Removed onError props from LocationMap")}catch(a){console.error("\u274c Error fixing LocationMap props:",a.message)}try{let a=fs.readFileSync("app/components/ui/customToolbar.tsx","utf8");a=a.replace(/const StyledToolbarButton = styled\(ToolbarButton\)<\{ ownerState: OwnerState \}>\([\s\S]*?\);/g,"const StyledToolbarButton = ToolbarButton;");a=a.replace(/const StyledTextField = styled\(TextField\)<\{ ownerState: OwnerState \}>\([\s\S]*?\);/g,
"const StyledTextField = TextField;");a=a.replace(/ownerState=\{\{ expanded: state\.expanded \}\}/g,"");a=a.replace(/ownerState=\{\{ expanded: expanded \}\}/g,"");fs.writeFileSync("app/components/ui/customToolbar.tsx",a,"utf8");console.log("\u2705 Fixed: Simplified customToolbar component")}catch(a){console.error("\u274c Error fixing customToolbar:",a.message)}try{let a=fs.readFileSync("app/locations/manage/page.tsx","utf8");a=a.replace(/<Grid item xs={12} sm={6} md={4} key={location\.id}>/g,'<Grid component="div" item xs={12} sm={6} md={4} key={location.id}>');
fs.writeFileSync("app/locations/manage/page.tsx",a,"utf8");console.log("\u2705 Fixed: Added component prop to Grid")}catch(a){console.error("\u274c Error fixing Grid props:",a.message)}try{let a=fs.readFileSync("app/persons/[id]/page.tsx","utf8");a=a.replace(/onSubmit={handleRelationshipSubmit}/g,"");a=a.replace(/currentPerson={person!}/g,"");a=a.replace(/existingRelationship={editingRelationship \? \{[\s\S]*?\} : undefined}/g,"");a=a.replace(/loading={loading}/g,"");fs.writeFileSync("app/persons/[id]/page.tsx",
a,"utf8");console.log("\u2705 Fixed: Removed problematic props from RelationshipForm and RelationshipNetwork")}catch(a){console.error("\u274c Error fixing RelationshipForm props:",a.message)}},fixBibliographySync=()=>{try{let a=fs.readFileSync("app/api/auth/mendeley/callback/route.ts","utf8");a=a.replace(/create:\s*\{[\s\S]*?userId:\s*any;[\s\S]*?isActive:\s*true;[\s\S]*?\}/g,"create: {\n        userId: user.id,\n        service: 'mendeley',\n        name: 'Mendeley',\n        accessToken: tokens.access_token,\n        refreshToken: tokens.refresh_token,\n        tokenExpiresAt: tokens.expires_at ? new Date(tokens.expires_at * 1000) : null,\n        isActive: true,\n        updatedAt: new Date(),\n        users: {\n          connect: { id: user.id }\n        }\n      }");
fs.writeFileSync("app/api/auth/mendeley/callback/route.ts",a,"utf8");console.log("\u2705 Fixed: bibliography sync schema in mendeley callback")}catch(a){console.error("\u274c Error fixing bibliography sync:",a.message)}};
try{const a=findFiles("./app");console.log(`\ud83d\udcc1 Found ${a.length} files to process...`);a.forEach(fixImportsInFile);fixComponentProps();fixBibliographySync();console.log("\ud83c\udf89 Import path fixes complete!");console.log("\ud83d\udccb Next steps:");console.log("   1. Run: npm run type-check");console.log("   2. Test the application at http://localhost:3002");console.log("   3. Navigate to different pages to verify they work")}catch(a){console.error("\u274c Error during import path fixes:",
a),process.exit(1)};