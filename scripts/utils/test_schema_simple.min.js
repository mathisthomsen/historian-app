'use strict';const {PrismaClient}=require("@prisma/client"),prisma=new PrismaClient;
async function testSchemaTables(){console.log("\ud83e\uddea Testing New Database Schema Tables...\n");try{console.log("1. Testing sources table...");const c=await prisma.sources.count();console.log(`   \u2705 Sources table exists (${c} records)`);console.log("\n2. Testing statements table...");const e=await prisma.statements.count();console.log(`   \u2705 Statements table exists (${e} records)`);console.log("\n3. Testing personEventRelations table...");const f=await prisma.personEventRelations.count();
console.log(`   \u2705 PersonEventRelations table exists (${f} records)`);console.log("\n4. Testing sourceOnRelations table...");const g=await prisma.sourceOnRelations.count();console.log(`   \u2705 SourceOnRelations table exists (${g} records)`);console.log("\n5. Testing enhanced events table...");const h=await prisma.events.count();console.log(`   \u2705 Events table exists with new fields (${h} records)`);console.log("\n6. Testing enhanced persons table...");const k=await prisma.persons.count();
console.log(`   \u2705 Persons table exists with new fields (${k} records)`);console.log("\n7. Testing table structure...");const d=await prisma.$queryRaw`
      SELECT 
        table_name,
        column_name,
        data_type
      FROM information_schema.columns 
      WHERE table_name IN ('sources', 'statements', 'person_event_relations', 'source_on_relations')
      ORDER BY table_name, ordinal_position
    `;console.log(`   \u2705 Found ${d.length} columns in new tables`);const b={};d.forEach(a=>{b[a.table_name]||(b[a.table_name]=[]);b[a.table_name].push(a.column_name)});Object.keys(b).forEach(a=>{console.log(`      ${a}: ${b[a].join(", ")}`)});console.log("\n\u2705 All schema tests passed!");console.log("\n\ud83c\udfaf New database structure is working correctly.");console.log("\n\ud83d\udcca Schema Summary:");console.log("   - sources: \u2705 Created");console.log("   - statements: \u2705 Created");
console.log("   - personEventRelations: \u2705 Created");console.log("   - sourceOnRelations: \u2705 Created");console.log("   - Enhanced events: \u2705 Updated");console.log("   - Enhanced persons: \u2705 Updated")}catch(c){console.error("\u274c Schema test failed:",c)}finally{await prisma.$disconnect()}}testSchemaTables().catch(console.error);